<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">文档</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">快速开始</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">准备开始</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">教程：模态框</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">教程：模态框 - 事件</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">教程：模态框 - 更新</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">教程：模态框 - 嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">教程：模态框 - 测试</a></li></ul><p class="docs-nav-group">指南</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">别名</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">状态</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">组件生命周期</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">渲染组件</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">内联事件</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">导入</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy 组件</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX 组件</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">渐进增强</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman 生成器</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">构建</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">性能</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>Soy 组件</h1><p>先了解关于怎样使用 soy 模板构建组件的整个教程，请确保学过了 <a href="/docs/modal.html">模态框教程</a>。</p><p>本指南将说明 <strong>Metal.js</strong> 组件和 <a href="http://developers.google.com/closure/templates/">soy 模板</a> 之间集成的有关细节。</p><p>注意，<strong>Metal.js</strong> 与模板无关，因此它根本没必要使用 soy。也就是说，我们已经提供了 metal 组件和 soy 之间很好的集成，因此如果您喜欢这个模板语言的话可以试一试。</p><h2>Soy.register</h2><p>在您的 <strong>Metal.js</strong> 组件中使用 soy 模板，您只需要做的是调用 <code>Soy.register</code>，传给它您的组件类和您将使用的 soy 模板，像这样：</p><textarea class="code" data-mode="javascript">import templates from './MyComponent.soy';
import Component from 'metal-component';
import Soy from 'metal-soy';

class MyComponent extends Component {
}
Soy.register(MyComponent, templates);

export default MyComponent;</textarea><p>默认情况下，<strong>Metal.js</strong> 为了渲染将用被叫做 <strong>render</strong> 的 soy 模板作为入口。但是如果你愿意，也可以传一个名称给 <code>Soy.register</code> 方法最后的参数，告诉我们使用了一个不同的方式，像这样：</p><textarea class="code" data-mode="javascript">Soy.register(MyComponent, templates, 'templateName');</textarea><h2>模板文件</h2><p>确保您的 soy 文件有这个入口点模板（默认是<strong>render</strong> ），否则没什么会被渲染。</p><p>这个主模板将接收以下数据组合：<ul><li><a href="/docs/state.html">状态数据</a></li><li><a href="/docs/state.html#config">配置数据</a> （通过 <code>this.config</code> 访问）</li><li><a href="/docs/inline-events.html#function">组件方法</a></li></ul></p><p>注意，默认情况下所有在组件主 soy 模板中被定义的参数都会自动被配置成状态属性，但是没有特定配置项（例如初始值或验证器）。如通过状态属性手动配置，它们仍然会保持指定的安装。</p><p>组件传递过来而没有被直接定义在主要的 soy 模板中的任何参数都将作为基本配置数据被处理，这意味着改变它们将不能自动重新渲染组件。它们仍然能够被传递给其他模板通过使用 <code>data="all"</code> ，同样地在 js 文件中也能通过 <code>config</code> 属性被访问到。</p><textarea class="code" data-mode="javascript">// Contains all the data received by the component.
this.config</textarea><h2>Soy 编译</h2><p>为了使 <strong>Metal.js</strong> 和 <strong>soy</strong> 集成工作，soy 文件需要被我们的构建工具编译。这是因为它们不仅编译代码，也会添加一些信息帮助集成（例如导入声明）。</p><p>为 <strong>Metal.js</strong> 提供的能够正确编译 soy 的可用构建工具是：</p><ul><li><p><a href="http://npmjs.com/package/gulp-metal">gulp-metal</a> （当通过 <a href="/docs/yeoman-generator.html">generator-metal</a> 创建项目时已经包括在内了）。</p></li><li><p><a href="http://npmjs.com/package/metal-cli">metal-cli</a></p></li><li><p><a href="http://npmjs.com/package/metal-tools-soy">metal-tools-soy</a></p></li></ul></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>由 <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a> 为您呈现</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> 许可</span></p></div></footer><script src="/scripts/highlight.js"></script><script>
	var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?13dd41826a1d871566b7a91094c3763e";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
	</script></body></html>