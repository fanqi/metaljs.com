<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">文档</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">快速开始</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">准备开始</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">教程：模态框</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">教程：模态框 - 事件</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">教程：模态框 - 更新</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">教程：模态框 - 嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">教程：模态框 - 测试</a></li></ul><p class="docs-nav-group">指南</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">别名</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">状态</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">组件生命周期</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">渲染组件</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">内联事件</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">导入</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy 组件</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX 组件</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">渐进增强</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman 生成器</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">构建</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">性能</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>内联事件</h1><p>Metal.js 的另一个非常有用的特性是在模板中直接声明事件的能力。除了简单和直观，这个特性允许 Metal.js 处理附加事件本身， 所以这可以以最好的方式完成，例如 <a href="https://learn.jquery.com/events/event-delegation/">代理</a>， 而用户根本不用担心。当组件被处理释放时，这些事件也能被自动分离。</p><h2>内联监听器 - 通过方法名称</h2><p>您能很容易地通过模板添加 DOM 事件监听器，像这样：</p><textarea class="code" data-mode="javascript">&lt;button onClick="close" type="button" class="close"&gt;</textarea><p>以上代码定义了一旦点击 <strong>x</strong>，将会调用组件的 <code>close</code> 方法。</p><h2 id="function">内联监听器 - 通过方法引用</h2><p>如果您喜欢，您也可以通过实际的函数引用（而不只是它的名字）内联监听器。</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">/**
 * In the "render" template, soy params that match a
 * component's function name will be that function
 * (automatically bound to the component instance).
 * @param close
 */
&lbrace;template .render&rbrace;
  // ...
  &lt;button onClick="{$close}" type="button" class="close"&gt;
  // ...
&lbrace;/template&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">
&lt;button onClick={this.close.bind(this)} type="button" class="close"&gt;</textarea></div></div><p>也可以像前面的示例一样以完全相同的方式工作。</p><h2>内联监听器 - 嵌套组件</h2><p>当使用 <a href="/docs/nested-components.html">嵌套组件</a> 时，也可以使用 <strong>events</strong> 属性内联事件：</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lbrace;call Button.render&rbrace;
  &lbrace;param events: ['click': ['selector': 'button', 'fn': 'close']] /&rbrace;
  &lbrace;param label: 'Ok' /&rbrace;
&lbrace;/call&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">var events = {click: {
  selector: 'button',
  fn: 'close'
}};
&lt;Button events={events} label="Ok" /&gt;</textarea></div></div><p>将导致每当与给定选择匹配的元素触发点击事件时，调用来自子组件的 <code>close</code> 函数。</p><p>假如您想使用父组件中的方法监听事件，仅需要传递方法引用而不是字符串，像这样：</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lbrace;call Button.render&rbrace;
  &lbrace;param events: ['click': ['selector': 'button', 'fn': $close]] /&rbrace;
  &lbrace;param label: 'Ok' /&rbrace;
&lbrace;/call&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">var events = {click: {
  selector: 'button',
  fn: this.close.bind(this)
}};
&lt;Button events={events} label="Ok" /&gt;</textarea></div></div><p>除了 dom 事件，您也能用同样的方法监听来自子组件的自定义事件：</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lbrace;call Button.render&rbrace;
  &lbrace;param events: ['labelChanged': $handleLabelChanged] /&rbrace;
  &lbrace;param label: 'Ok' /&rbrace;
&lbrace;/call&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">var events = {labelChanged: this.handleLabelChanged.bind(this)};
&lt;Button events={events} label="Ok" /&gt;</textarea></div></div><h2>内联监听器 - 选择性的使用</h2><p>除了 <code>on[EventName]</code> 格式您也可以用 <code>data-on[eventname]</code> 来添加内联监听器。例如：</p><textarea class="code" data-mode="javascript">&lt;button data-onclick="close" type="button" class="close"&gt;</textarea><p>注意，这种格式主要是支持启用 <a href="/docs/progressive-enhancement.html">渐进增强</a>， 例如当通过 Java 中运行 soy 模板时。当模板使用 <code>on[EventName]</code> 格式在Java中运行时， 它们将输入带有真实属性的元素，在浏览器中可能会导致错误。 相反在 JavaScript 中这些都能作为元素属性被使用，所以这些问题不会发生。</p><p>所以自由地使用你最喜欢的格式，或者更适合您的需要的方式。</p></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>由 <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a> 为您呈现</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> 许可</span></p></div></footer><script src="/scripts/highlight.js"></script><script>
	var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?13dd41826a1d871566b7a91094c3763e";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
	</script></body></html>