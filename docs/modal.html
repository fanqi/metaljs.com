<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">文档</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">快速开始</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">准备开始</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">教程：模态框</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">教程：模态框 - 事件</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">教程：模态框 - 更新</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">教程：模态框 - 嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">教程：模态框 - 测试</a></li></ul><p class="docs-nav-group">指南</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">别名</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">状态</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">组件生命周期</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">渲染组件</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">内联事件</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">导入</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy 组件</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX 组件</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">渐进增强</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman 生成器</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">构建</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">性能</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>教程：模态框</h1><p>在 <a href="/docs/">上一章</a> 中，我们学习了怎样使用 Metal.js 构建一个简单的项目， 屏幕上呈现 <strong>Hello World</strong> 。这一章里让我们在其基础上改进下，呈现一个模态对话框吧。</p><h2>渲染</h2><p>我们生成的项目已经包含了 <a href="http://getbootstrap.com/">bootstrap css</a>， 因此我们可以在模态框中使用它的标记。更新组件模板如下：</p><div class="code-tabs"><div class="code-tabs-header"><button class="code-tab selected" data-index="0" type="button">Soy: src/Modal.soy</button><button class="code-tab" data-index="1" type="button">JSX: src/Modal.js</button></div><div class="content"><textarea class="code" data-mode="x-soy">&lbrace;namespace Modal&rbrace;

/**
 * This renders the component's whole content.
 * Note: has to be called ".render".
 * @param body
 * @param header
 */
&lbrace;template .render&rbrace;
	&lt;div class="modal show"&gt;
		&lt;div class="modal-dialog"&gt;
			&lt;div class="modal-content"&gt;
				&lt;header class="modal-header"&gt;
					&lt;button type="button" class="close"&gt;
						&lt;span&gt;×&lt;/span&gt;
					&lt;/button&gt;
					&lt;h4&gt;{$header}&lt;/h4&gt;
				&lt;/header&gt;
				&lt;section class="modal-body"&gt;
					{$body}
				&lt;/section&gt;
				&lt;footer class="modal-footer"&gt;
					&lt;button type="button" class="btn btn-primary"&gt;OK&lt;/button&gt;
				&lt;/footer&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lbrace;/template&rbrace;</textarea><textarea class="code hidden" data-mode="javascript">import JSXComponent from 'metal-jsx';

class Modal extends JSXComponent {
	/**
	 * Renders the component's content. Note that data can be accessed via the
	 * `config` property.
	 */
	render() &lbrace;
		return &lt;div class="modal show"&gt;
			&lt;div class="modal-dialog"&gt;
				&lt;div class="modal-content"&gt;
					&lt;header class="modal-header"&gt;
						&lt;button type="button" class="close"&gt;
							&lt;span&gt;×&lt;/span&gt;
						&lt;/button&gt;
						&lt;h4&gt;{this.config.header}&lt;/h4&gt;
					&lt;/header&gt;
					&lt;section class="modal-body"&gt;
						{this.config.body}
					&lt;/section&gt;
					&lt;footer class="modal-footer"&gt;
						&lt;button type="button" class="btn btn-primary"&gt;OK&lt;/button&gt;
					&lt;/footer&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;;
	}
}

export default Modal;</textarea></div></div><h2 id="data">传递数据</h2><p>模板是访问数据来确定模态框的 <strong>头部</strong> 和 <strong>主体</strong> 内容。 然而组件怎样才能接收数据呢？</p><p>一个方式是通过组件的的构造函数。当直接创建组件实例时，可以把数据对象作为第一个参数传递给它们。 所以我们更新一下 demo 来传递一些数据：</p><textarea class="code" data-mode="javascript">new metal.Modal({
	header: 'My Modal',
	body: 'Built using Metal.js'
});</textarea><h2>运行 demo</h2><p>通过 <code>npm run build</code> 编译代码，并且在浏览器中打开 demo，应该可以看到这样：</p><img src="../images/docs/modal.png" width="100%"><h2>接下来的步骤</h2><p>我们已经处理了渲染，但是您会注意到点击 <strong>x</strong> 按钮并不会做任何事情。让我们做这项工作吧。</p><p><strong><a href="/docs/modal_events.html">↪ 教程：模态框 - 事件</a></strong></p></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>由 <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a> 为您呈现</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> 许可</span></p></div></footer><script src="/scripts/highlight.js"></script><script>
	var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?13dd41826a1d871566b7a91094c3763e";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
	</script></body></html>