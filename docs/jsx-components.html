<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">文档</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">快速开始</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">准备开始</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">教程：模态框</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">教程：模态框 - 事件</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">教程：模态框 - 更新</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">教程：模态框 - 嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">教程：模态框 - 测试</a></li></ul><p class="docs-nav-group">指南</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">别名</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">状态</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">组件生命周期</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">渲染组件</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">内联事件</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">导入</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy 组件</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX 组件</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">渐进增强</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman 生成器</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">构建</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">性能</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>JSX 组件</h1><p>先了解关于怎样使用 JSX 模板构建组件的实用教程，请确保学过了 <a href="/docs/modal.html">模态框教程</a>。</p><p>本指南将说明 <strong>Metal.js</strong> 组件和 <a href="https://facebook.github.io/jsx/">jsx 模板</a> 之间集成的有关细节。</p><p>注意，<strong>Metal.js</strong> 与模板无关，因此它根本不需要使用 JSX。也就是说，我们已经提供了 metal 组件和 JSX 之间很好的集成，因此如果您喜欢它的话可以试一试。</p><h2>JSXComponent</h2><p>要在您的 <strong>Metal.js</strong> 组件中使用JSX，您唯一要做的是从 <strong>JSXComponent</strong> 扩展，像这样：</p><textarea class="code" data-mode="javascript">import JSXComponent from 'metal-jsx';

class MyComponent extends JSXComponent {
}

export default MyComponent;</textarea><h2><code>render</code> 方法</h2><p>现在我们已经从 <strong>JSXComponent</strong> 扩展了，我们能够在 <code>render</code> 方法中使用 jsx 来指定我们的组件应该渲染什么了。</p><textarea class="code" data-mode="javascript">import JSXComponent from 'metal-jsx';

class MyComponent extends JSXComponent {
	render() {
		return &lt;div class={this.config.cssClass}&gt;
			Hello {this.name}
		&lt;/div&gt;;
	}
}

MyComponent.STATE = {
	name: {
		validator: core.isString,
		value: 'World'
	}
};

export default MyComponent;</textarea><p>注意组件能够有两种类型的数据： <a href="/docs/state.html">state</a> 和 <a href="/docs/state.html#config">config</a>。 主要的区别是：config 是通过 <code>this.config</code> 进行访问并且是从父组件或者构建函数中接收到的原始数据； State 能够直接通过 <code>this</code> 访问, 像之前例子中的 <code>this.name</code>，并且能够配置验证器、设置、初始值及其他特性。 查看关于 <a href="/docs/state.html">state</a> 的指南了解更多。</p><h2>子配置</h2><p>只要内容是通过组件的 jsx 标签传递的，通过 <code>children</code> 配置数据就会接收到。这样组件就能决定内容将被渲染，或者到底应该去哪里。</p><p>例如，想象一个简单的列表组件，可以接收它的条目作为它的内容，像这样：</p><textarea class="code" data-mode="javascript">&lt;List&gt;
  &lt;li&gt;Item 1&lt;/li&gt;
  &lt;li&gt;Item 2&lt;/li&gt;
  &lt;li&gt;Item 3&lt;/li&gt;
&lt;/List&gt;</textarea><p>这能够通过使用 <code>children</code> 配置来实现：</p><textarea class="code" data-mode="javascript">class List extends JSXComponent {
  render() {
    return &lt;ul&gt;{this.config.children}&lt;/ul&gt;
  }
}</textarea><p>如果您检查 <code>this.config.children</code>，您将会注意到它是一个对象数组。 这样处理组件的内容时候就很给力了。例如，您可以选择渲染 children 的一部分，像这样：</p><textarea class="code" data-mode="javascript">// Renders only the second item.
return &lt;ul&gt;{this.config.children[1]}&lt;/ul&gt;</textarea><p>甚至改变在渲染之前就应该接受的数据：</p><textarea class="code" data-mode="javascript">// Forces all items to use the 'my-list-item-class' css class.
this.config.children.forEach(child => {
  child.class = 'my-list-item-class';
};
return &lt;ul&gt;{this.config.children}&lt;/ul&gt;</textarea><h2>功能性组件</h2><p>有时您会创建非常简单的组件，除了渲染自己的内容没有其他的行文。在这种情况下，您可以放弃使用类，只需要创建仅用来渲染内容的功能性组件来替代。</p><p>例如，让我们创建一个简单的 <strong>Button</strong> 组件当做一个功能：</p><textarea class="code" data-mode="javascript">/**
 * Functional components receive the configuration
 * object as the first param.
 */
var Button = ({ cssClass, label }) => {
  return &lt;button type="button" class={cssClass}&gt;{label}&lt;/button&gt;;
};</textarea><p>此外，您还可以使用组件类的方式从父组件中使用它，例如：</p><textarea class="code" data-mode="javascript">&lt;Button cssClass="btn btn-primary" label="OK" /&gt;</textarea><h2>渲染 JSX 组件</h2><p>JSX组件既能通过 <a href="rendering-components.html">常规的方式</a> 渲染，也能通过 <code>JSXComponent.render</code> 函数，像这样：</p><textarea class="code" data-mode="javascript">class Button extends JSXComponent {
  render() {
    // Your render logic
  }
}
JSXComponent.render(Button, {label: 'OK'}, parent);</textarea><p>您也能传递一个功能性的组件给它：</p><textarea class="code" data-mode="javascript">var Button = config => {
  // Your render logic
};
JSXComponent.render(Button, {label: 'OK'}, parent);</textarea><p>或者直接通过 JSX 渲染：</p><textarea class="code" data-mode="javascript">JSXComponent.render(<Button label="OK" />, parent);</textarea><h2>JSX 编译</h2><p>为了使 <strong>Metal.js</strong> 和 <strong>JSX</strong> 之间的集成工作，需要通过一个叫做 <a href="http://npmjs.com/package/babel-plugin-incremental-dom">babel-plugin-incremental-dom</a> 的 babel 插件 来编译 JSX 代码。直接使用它意味着你需要手动配置它，因此我们也提供了 <a href="http://npmjs.com/package/babel-preset-metal-jsx">babel preset</a> 供您使用。</p></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>由 <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a> 为您呈现</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> 许可</span></p></div></footer><script src="/scripts/highlight.js"></script><script>
	var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?13dd41826a1d871566b7a91094c3763e";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
	</script></body></html>