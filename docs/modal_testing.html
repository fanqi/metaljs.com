<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="UTF-8"><title>Metal.js</title><meta name="theme-color" content="#9552ef"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="stylesheet" href="/styles/main.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/material.css"><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/soy/soy.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="http://use.typekit.net/qed5qir.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><header class="header"><div class="container"><div class="header-bg"></div><nav class="topbar"><a class="topbar-logo" href="/"><img class="topbar-logo-image" src="/images/logo_signature@2x.png" alt="Metal.js Logo" width="35" height="28"><h1 class="topbar-logo-text">Metal.js</h1></a><ul class="topbar-menu"><li class="topbar-menu-item"><a class="topbar-menu-link" href="/docs/">文档</a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="https://github.com/metal/metal"><img src="/images/github_icon.svg" alt="GitHub Icon" width="16"></a></li><li class="topbar-menu-item"><a class="rounded-icon topbar-icon-external" target="_blank" href="http://metaljs-chat.wedeploy.io/"><img src="/images/slack_icon.svg" alt="Slack Icon"></a></li></ul></nav></div></header><main class="docs"><div class="container"><div class="row"><nav class="docs-nav col-md-3"><p class="docs-nav-group">快速开始</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/" class="docs-nav-link">准备开始</a></li><li class="docs-nav-item"><a href="/docs/modal.html" class="docs-nav-link">教程：模态框</a></li><li class="docs-nav-item"><a href="/docs/modal_events.html" class="docs-nav-link">教程：模态框 - 事件</a></li><li class="docs-nav-item"><a href="/docs/modal_updates.html" class="docs-nav-link">教程：模态框 - 更新</a></li><li class="docs-nav-item"><a href="/docs/modal_nested.html" class="docs-nav-link">教程：模态框 - 嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/modal_testing.html" class="docs-nav-link">教程：模态框 - 测试</a></li></ul><p class="docs-nav-group">指南</p><ul class="docs-nav-list"><li class="docs-nav-item"><a href="/docs/alias.html" class="docs-nav-link">别名</a></li><li class="docs-nav-item"><a href="/docs/state.html" class="docs-nav-link">状态</a></li><li class="docs-nav-item"><a href="/docs/component-lifecycle.html" class="docs-nav-link">组件生命周期</a></li><li class="docs-nav-item"><a href="/docs/rendering-components.html" class="docs-nav-link">渲染组件</a></li><li class="docs-nav-item"><a href="/docs/inline-events.html" class="docs-nav-link">内联事件</a></li><li class="docs-nav-item"><a href="/docs/nested-components.html" class="docs-nav-link">嵌套组件</a></li><li class="docs-nav-item"><a href="/docs/importing.html" class="docs-nav-link">导入</a></li><li class="docs-nav-item"><a href="/docs/soy-components.html" class="docs-nav-link">Soy 组件</a></li><li class="docs-nav-item"><a href="/docs/jsx-components.html" class="docs-nav-link">JSX 组件</a></li><li class="docs-nav-item"><a href="/docs/progressive-enhancement.html" class="docs-nav-link">渐进增强</a></li><li class="docs-nav-item"><a href="/docs/yeoman-generator.html" class="docs-nav-link">Yeoman 生成器</a></li><li class="docs-nav-item"><a href="/docs/building.html" class="docs-nav-link">构建</a></li><li class="docs-nav-item"><a href="/docs/performance.html" class="docs-nav-link">性能</a></li></ul></nav><article class="docs-content col-md-6 col-md-offset-1"><h1>教程：模态框 - 测试</h1><p>在 <a href="/docs/modal_nested.html">上一章</a> 中，我们已经完成了 <strong>模态框</strong> 组件。 我们想展示的最后一件事情就是怎样使用 <strong>Metal.js</strong> 提供的工具帮助您测试代码。</p><h2>测试脚本</h2><p>如果您看 <strong>package.json</strong> 文件，您将注意到它已经包含了一个可用的测试脚本：</p><textarea class="code" data-mode="javascript">{
	"scripts": {
		"test": "gulp test"
	}
}</textarea><p>如果您没有通过生成器来构建项目，也能通过使用 <a href="/docs/gulp_metal.html">gulp-metal</a> 来获取 <strong>Metal.js</strong> 的测试工具。</p><h2>添加一个测试</h2><p>还要注意，您生成的项目目录中还有一个叫做 <strong>test/Modal.js</strong> 的文件，包括一个失败的断言。 您可以想象，您需要做的就是将您的测试添加到这个文件中。</p><p>为了说明这一点，让我们来替换存在的测试，检查给定的 <code>body</code> 数据是否被正确渲染：</p><textarea class="code" data-mode="javascript">import Modal from '../src/Modal';

describe('Modal', function() {
	it('should render the body', function() {
		var component = new Modal({
			body: 'Test Body'
		});
		var bodyElement = component.element.querySelector('.modal-body');
		assert.ok(bodyElement);
		assert.strictEqual('Test Body', bodyElement.textContent);
	});
});
</textarea><h2>运行测试</h2><p>要运行测试，需要做的是在终端中键入 <code>npm test</code>。您会看到这样的：</p><img src="../images/docs/test.png" width="100%"><h2>测试环境</h2><p>我们写的测试文件是用 <a href="http://mochajs.org">Mocha</a> 和 <a href="http://chaijs.com/">Chai</a> 描述的， 并且用 <a href="http://karma-runner.github.io/0.12/index.html">Karma</a> 作为测试运行器。 这些是 <strong>gulp-metal</strong> 默认安装的。</p><p>需要重点注意的是，您并不是只能使用 <strong>gulp-metal</strong> 来进行测试。 它只是一个已经为您准备好的简单的方法，如果您愿意，您肯定也可以安装自己的环境。</p><h2>接下来的步骤</h2><p>您现在应该有了一个良好的 <strong>Metal.js</strong> 基础知识。如果您想深入了解更多详细信息和高级主题，请查看我们的一些指南。</p></article></div></div></main><footer class="footer"><div class="container"><p class="footer-paragraph"><span class="footer-credits"><a class="rounded-icon footer-icon-liferay" target="_blank" href="http://liferay.com/"><img src="/images/liferay_logo.svg" alt="Liferay Icon" width="19" height="19"></a>由 <a class="footer-link" target="_blank" href="http://liferay.com/">Liferay, Inc</a> 为您呈现</span><span class="footer-license"><a class="footer-link" target="_blank" href="https://github.com/metal/metal/blob/master/LICENSE.md">BSD</a> 许可</span></p></div></footer><script src="/scripts/highlight.js"></script><script>
	var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?13dd41826a1d871566b7a91094c3763e";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
	</script></body></html>